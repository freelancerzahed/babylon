<!DOCTYPE html>
<html>

<head>
    <title>Babylon.js Shape Key Extraction</title>
    <script src="plugin/babylon.js"></script>
    <script src="plugin/babylon.glTF2FileLoader.js"></script>
    <style>
        /*==================== Section Four body modeler css start============= */
        :root {
            --slider-handle-size: 14px;
            --slider-handle-border-radius: 50px;
            --slider-handle-margin-top: -4px;
            --slider-track-height: 6px;
            --slider-track-border-radius: 4px;
            --orange: #FFA500;

        }

        .section_four {
            display: grid;
            grid-template-columns: 1fr 3fr;
            gap: 10px;
            width: 100%;
            background: var(--color-white);
        }

        .section_four .modeler_container {
            width: 100%;
            height: 100vh;
        }

        .section_four .modeler_container .body_modeler {
            text-align: center;
        }

        .section_four .modeler_container .body_modeler h1 {
            color: var(--color-primary);
            font-size: 2.5rem;
        }

        .section_four .modeler_container .body_modeler h5 {
            color: #ce5f00;
            font-size: 1.5rem;
            font-weight: 200;
            text-align: center;
        }


        /* =============== Modeler Controler ===============*/

        .section_four .modeler_controller {
            height: 100vh;
            border: solid 2px var(--color-primary);
        }

        .section_four .modeler_controller p {
            font-size: 14px;
            text-align: center;
            padding: 5px;
            margin-top: 10px;
            color: var(--color-primary);
        }

        .feature_group_wrap {
            display: flex;
            padding: 2px 20px;
            align-items: center;
            justify-content: center;
        }

        .feature_group_wrap label {
            flex-basis: 177px;
        }

        .tick-slider {
            position: relative;
            width: 100%;
        }

        .tick-slider-value {
            position: absolute;
            top: 0;
            font-weight: bold;
            color: var(--blue);
            border-radius: var(--slider-handle-border-radius);
            display: none;
        }

        .tick-slider-value>div {
            animation: bulge 0.3s ease-out;
        }

        .tick-slider-background,
        .tick-slider-progress,
        .tick-slider-tick-container {
            position: absolute;
            bottom: 5px;
            left: 0;
            height: var(--slider-track-height);
            pointer-events: none;
            border-radius: var(--slider-track-border-radius);
            background-color: #dee2e6;
            z-index: 0;
        }

        .tick-slider-background {
            width: 100%;
            background-color: var(--light-gray);
            background-color: #dee2e6;
        }

        .tick-slider-progress {
            background-color: var(--yellow);
            z-index: 1;
        }

        .tick-slider-tick-container {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            /* padding: 0 calc(var(--slider-handle-size) / 2);*/
            background-color: #dee2e6;
        }

        .tick-slider-tick {
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background-color: #900;
        }

        input[type="range"] {
            appearance: none;
            -moz-appearance: none;
            -webkit-appearance: none;
            width: calc(100% + 10px);
            background: transparent;
            outline: none;
            margin: 10px 0;
        }

        @-moz-document url-prefix() {
            input[type="range"] {
                position: relative;
                --webkit-appearance: none;
                width: 100%;
                background: transparent;
                outline: none;
                margin: -5px -5px;
                z-index: 100;
            }
        }

        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            -moz-appearance: none;
            -webkit-appearance: none;
            border: none;
        }

        input[type="range"]:focus {
            outline: none;
        }

        input[type="range"]::-moz-focus-outer {
            border: 0;
        }


        /*

    HANDLE

*/

        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            -moz-appearance: none;
            -webkit-appearance: none;
            width: var(--slider-handle-size);
            height: var(--slider-handle-size);
            background: #900;
            border-radius: var(--slider-handle-border-radius);
            cursor: pointer;
            -webkit-transform: scale(1);
            text-align: center;
            transform: scale(1);
            transition: transform 0.25s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        input[type="range"]:hover::-webkit-slider-thumb,
        input[type="range"]:focus::-webkit-slider-thumb {
            transform: scale(1.2);
        }

        input[type="range"]::-moz-range-thumb {
            appearance: none;
            -moz-appearance: none;
            -webkit-appearance: none;
            width: var(--slider-handle-size);
            height: var(--slider-handle-size);
            background: var(--orange);
            border: none;
            border-radius: var(--slider-handle-border-radius);
            cursor: pointer;
            transition: transform 0.25s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        input[type="range"]:hover::-moz-range-thumb,
        input[type="range"]:focus::-moz-range-thumb {
            transform: scale(1.2);
        }


        /*

    TRACK

*/

        input[type="range"]::-webkit-slider-runnable-track {
            width: 100%;
            height: var(--slider-track-height);
            cursor: pointer;
            background: none;
            border-radius: var(--slider-track-border-radius);
        }

        input[type="range"]::-moz-range-track {
            width: 100%;
            height: var(--slider-track-height);
            cursor: pointer;
            background: none;
            border-radius: var(--slider-track-border-radius);
        }

        input[type="range"]:focus::-webkit-slider-runnable-track {
            background: none;
        }

        input[type="range"]:active::-webkit-slider-runnable-track {
            background: none;
        }

        .body_modeler_canvases {
            position: relative;
            top: -92px;
            scale: 0.9;
        }

        .canvas_head,
        .canvas_neck,
        .canvas_breast,
        .canvas_shoulders,
        .canvas_stomach,
        .canvas_legs {
            position: absolute;
            right: 50%;
            transform: translate(50%, -50%);
            -webkit-transform: translate(50%, -50%);
            -moz-transform: translate(50%, -50%);
            -ms-transform: translate(50%, -50%);
            -o-transform: translate(50%, -50%);
        }

        .canvas_head {
            top: 222px;
            width: 500px;
            height: 100px;
            z-index: 1000;
        }

        .canvas_head_rear {
            top: 224px;
            width: 500px;
            height: 100px;
            z-index: 1000;
        }

        .canvas_neck {
            top: 271px;
            width: 500px;
            height: 100px;
            z-index: 900;
        }

        .canvas_neck_rear {
            top: 271px;
            width: 500px;
            height: 100px;
            z-index: 900;
        }

        .canvas_shoulders {
            top: 364px;
            width: 500px;
            height: 236px;
            z-index: 500;
        }

        .canvas_shoulders_rear {
            top: 364px;
            width: 500px;
            height: 236px;
            z-index: 500;
        }

        .canvas_breast {
            top: 347px;
            width: 500px;
            height: 195px;
            z-index: 800;
        }

        .canvas_stomach {
            top: 398px;
            width: 500px;
            height: 266px;
            z-index: 200;
        }

        .canvas_back {
            top: 401px;
            width: 500px;
            height: 266px;
            z-index: 200;
        }

        .canvas_legs {
            top: 554px;
            width: 500px;
            height: 460px;
            z-index: 1px;
        }

        .canvas_bottom {
            top: 561px;
            width: 500px;
            height: 460px;
            z-index: 1px;
        }

        .body_modeler_action_btn {
            display: flex;
            justify-content: space-between;
            margin: 10px;
        }


        /*==================== Section Four body modeler css End============= */
    </style>
</head>

<body>
    <section class="section" id="bodyModelerSection">
        <div class="section_four">
            <div class="modeler_controller">
                <p>Move the sliders of each body feature to reshape the model. Click "Body Rear" to change the rear side
                    of your model.</p>


                <div class="controls" style="display: block;">
                    <div class="front-controls-full m-modeller">

                        <div class="head_and_neck">
                            <!-- Head Group -->
                            <div class="feature_group_wrap" id="head-shape">
                                <label for="slider-head-shape">Head Shape:</label>
                                <div class="tick-slider">
                                    <div id="sliderTicks_8" class="tick-slider-tick-container">
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>

                                    </div>
                                    <input id="slider-head-shape" class="tick-slider-input slide-full topmost"
                                        type="range" min="0" max="2" step="1" value="0" data-tick-step="0.25"
                                        data-tick-id="sliderTicks_8" name="head_shape_val" />
                                </div>
                            </div>
                            <div class="feature_group_wrap ubiquitous" id="head-size">
                                <label for="slider-head-size">Head Size:</label>
                                <div class="tick-slider">

                                    <div id="sliderTicks_9" class="tick-slider-tick-container">
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>

                                    </div>
                                    <input id="slider-head-size" class="tick-slider-input slide-full topmost"
                                        type="range" min="0" max="1" step="0.25" value="0" data-tick-step="0.25"
                                        data-tick-id="sliderTicks_9" name="head_size_val" />
                                </div>
                            </div>

                            <!-- Neck Group -->
                            <div class="feature_group_wrap ubiquitous" id="neck-height">
                                <label for="slider-neck-height">Neck Height:</label>
                                <div class="tick-slider">
                                    <div id="sliderTicks_11" class="tick-slider-tick-container">
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                    </div>
                                    <input id="slider-neck-height" class="tick-slider-input slide-full topmost"
                                        type="range" min="0" max="1" step="0.25" value="0" data-tick-step="1"
                                        data-tick-id="sliderTicks_11" name="neck_height_val" />
                                </div>
                            </div>
                            <div class="feature_group_wrap ubiquitous" id="neck-width">
                                <label for="name">Neck Width:</label>
                                <div class="tick-slider">
                                    <div class="tick-slider-value-container">

                                        <div id="sliderTicks_12" class="tick-slider-tick-container">
                                            <span class="tick-slider-tick"></span>
                                            <span class="tick-slider-tick"></span>
                                            <span class="tick-slider-tick"></span>

                                        </div>
                                        <input id="slider-neck-width" class="tick-slider-input slide-full topmost"
                                            type="range" min="0" max="1" step="0.5" value="0" data-tick-step="1"
                                            data-tick-id="sliderTicks_12" name="neck_width_val" />
                                    </div>

                                </div>
                            </div>
                            <div class="feature_group_wrap remove" id="trapezoidal-shape">
                                <label for="slider-neck-shape">Neck Shape:</label>
                                <div class="tick-slider">
                                    <div class="tick-slider-value-container">

                                        <div id="sliderTicks_12" class="tick-slider-tick-container">
                                            <span class="tick-slider-tick"></span>
                                            <span class="tick-slider-tick"></span>
                                        </div>
                                        <input id="slider-neck-shape" class="tick-slider-input slide-full topmost"
                                            type="range" min="0" max="1" step="1" value="0" data-tick-step="1"
                                            data-tick-id="sliderTicks_12" name="neck_width_val" />
                                    </div>

                                </div>
                            </div>
                            <div class="feature_group_wrap remove" id="trapezoidal-shape">
                                <label for="slider-chin-shape">Chin Shape :</label>
                                <div class="tick-slider">
                                    <div class="tick-slider-value-container">

                                        <div id="sliderTicks_21" class="tick-slider-tick-container">
                                            <span class="tick-slider-tick"></span>
                                            <span class="tick-slider-tick"></span>
                                        </div>
                                        <input id="slider-chin-shape" class="tick-slider-input slide-full topmost"
                                            type="range" min="0" max="1" step="1" value="0" data-tick-step="1"
                                            data-tick-id="sliderTicks_12" name="chin_shape_val" />
                                    </div>

                                </div>
                            </div>
                            <div class="feature_group_wrap remove" id="trapezoidal-shape">
                                <label for="slider-neck-rolls">Neck Rolls:</label>
                                <div class="tick-slider">
                                    <div class="tick-slider-value-container">

                                        <div id="sliderTicks_18" class="tick-slider-tick-container">
                                            <span class="tick-slider-tick"></span>
                                            <span class="tick-slider-tick"></span>
                                        </div>
                                        <input id="slider-neck-rolls" class="tick-slider-input slide-full topmost"
                                            type="range" min="0" max="1" step="1" value="0" data-tick-step="1"
                                            data-tick-id="sliderTicks_12" name="neck_rolls_val" />
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="shoulder_and_arm">
                          
                          
                        </div>
                        <div class="breast_and_torso">
                            <!-- Torso Group -->
                                <!-- Shoulders Group -->
                                <div class="feature_group_wrap ubiquitous" id="shoulder-height">
                                    <label for="slider-shoulder-height">Shoulder Height:</label>
                                    <div class="tick-slider">
                                        <div id="sliderTicks_13" class="tick-slider-tick-container">
                                            <span class="tick-slider-tick"></span>
                                            <span class="tick-slider-tick"></span>
                                            <span class="tick-slider-tick"></span>
                                        </div>
                                        <input id="slider-shoulder-height" class="tick-slider-input slide-full topmost"
                                            type="range" min="0" max="1" step="0.5" value="0" data-tick-step="1"
                                            data-tick-id="sliderTicks_13" name="shoulder_height_val" />
                                    </div>
                                </div>
                            <div class="feature_group_wrap ubiquitous" id="shoulder-width">
                                <label for="slider-shoulder-width">Shoulder Width:</label>
                                <div class="tick-slider">
                                    <div id="sliderTicks_14" class="tick-slider-tick-container">
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                    </div>
                                    <input id="slider-shoulder-width" class="tick-slider-input slide-full topmost"
                                        type="range" min="0" max="1" step="0.125" value="0" data-tick-step="1"
                                        data-tick-id="sliderTicks_14" name="shoulder_width_val" />
                                </div>
                            </div>
                            <div class="feature_group_wrap" id="stomach-width">
                                <label for="slider-stomach-width">Stomach Size:</label>
                                <div class="tick-slider">
                                    <div id="sliderTicks_22" class="tick-slider-tick-container">
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                    </div>
                                    <input id="slider-stomach-width" class="tick-slider-input slide-full topmost"
                                        type="range" min="0" max="1" step="0.125" value="0" data-tick-step="1"
                                        data-tick-id="sliderTicks_2" name="stomach_width_val" />
                                </div>
                            </div>
                            <div class="feature_group_wrap" id="stomach-shape">
                                <label for="slider-stomach-shape">Stomach Shape:</label>
                                <div class="tick-slider">
                                    <div id="sliderTicks_2" class="tick-slider-tick-container">
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                    </div>
                                    <input id="slider-stomach-shape" class="tick-slider-input slide-full topmost"
                                        type="range" min="0" max="5" step="1" value="0" data-tick-step="1"
                                        data-tick-id="sliderTicks_2" name="stomach_shape_val" />
                                </div>
                            </div>
                      

                      
                            <div class="feature_group_wrap" id="pregnant-size">
                                <label for="slider-pregnant-size">Trimester:</label>
                                <div class="tick-slider">
                                    <div id="sliderTicks_23" class="tick-slider-tick-container">
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                       
                                      
                                    </div>
                                    <input id="slider-pregnant-size" class="tick-slider-input slide-full topmost"
                                        type="range" min="0" max="1" step="0.333" value="0" data-tick-step="0.334"
                                        data-tick-id="sliderTicks_23" name="pregnant_size_val" />
                                </div>
                            </div>
                              <!--   Arm  group -->
                              <div class="feature_group_wrap" id="breast-size">
                                <label for="slider-breast-size">Breast Size:</label>
                                <div class="tick-slider">
                                    <div id="sliderTicks_1" class="tick-slider-tick-container">
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                    </div>
                                    <input id="slider-breast-size" class="tick-slider-input slide-full topmost"
                                        type="range" min="0" max="1" step="0.125" value="0" data-tick-step="1"
                                        data-tick-id="sliderTicks_1" name="breast_shape_val" />
                                </div>
                            </div>
                              <div class="feature_group_wrap" id="arm-size">
                                <label for="slider-arm-size">Arm Size:</label>
                                <div class="tick-slider">
                                    <div id="sliderTicks_15" class="tick-slider-tick-container">
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                    </div>
                                    <input id="slider-arm-size" class="tick-slider-input slide-full topmost"
                                        type="range" min="0" max="1" step="0.333" value="0" data-tick-step="1"
                                        data-tick-id="sliderTicks_15" name="arm_size_val" />
                                </div>
                            </div>
                            <div class="feature_group_wrap" id="arm-length">
                                <label for="slider-arm-length">Arm Length:</label>
                                <div class="tick-slider">
                                    <div id="sliderTicks_10" class="tick-slider-tick-container">
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                    </div>
                                    <input id="slider-arm-length" class="tick-slider-input slide-full topmost"
                                        type="range" min="0" max="1" step="1" value="0" data-tick-step="1"
                                        data-tick-id="sliderTicks_10" name="arm_length_val" />
                                </div>
                            </div>
                            <div class="feature_group_wrap" id="torso-height">
                                <label for="slider-torso-height">Torso Height:</label>
                                <div class="tick-slider">
                                    <div id="sliderTicks_3" class="tick-slider-tick-container">
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                    </div>
                                    <input id="slider-torso-height" class="tick-slider-input slide-full topmost"
                                        type="range" min="0" max="1" step="0.5" value="0" data-tick-step="1"
                                        data-tick-id="sliderTicks_3" name="torso_height_val" />
                                </div>
                            </div>
                        </div>
                        <div class="leg_and_hip d_none_md">
                            <!-- Leg Group -->
                            <div class="feature_group_wrap" id="leg-size">
                                <label for="slider-leg-size">Leg Size:</label>
                                <div class="tick-slider">
                                    <div id="sliderTicks_4" class="tick-slider-tick-container">
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                    </div>
                                    <input id="slider-leg-size" class="tick-slider-input slide-full topmost"
                                        type="range" min="0" max="1" step="0.25" value="0" data-tick-step="1"
                                        data-tick-id="sliderTicks_4" name="leg_size_val" />
                                </div>
                            </div>
                            <div class="feature_group_wrap" id="hip-size">
                                <label for="slider-hip-size">Hip Size:</label>
                                <div class="tick-slider">
                                    <div id="sliderTicks_6" class="tick-slider-tick-container">
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                    </div>
                                    <input id="slider-hip-size" class="tick-slider-input slide-full topmost"
                                        type="range" min="0" max="1" step="0.5" value="0" data-tick-step="1"
                                        data-tick-id="sliderTicks_6" name="hip_size_val" />
                                </div>
                            </div>
                            <div class="feature_group_wrap" id="crotch-height">
                                <label for="slider-crotch-height">Crotch Height:</label>
                                <div class="tick-slider">
                                    <div id="sliderTicks_5" class="tick-slider-tick-container">
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                    </div>
                                    <input id="slider-crotch-height" class="tick-slider-input slide-full topmost"
                                        type="range" min="0" max="1" step="0.5" value="0" data-tick-step="1"
                                        data-tick-id="sliderTicks_5" name="crotch_height_val" />
                                </div>
                            </div>

                            <div class="feature_group_wrap" id="bottom-shape">
                                <label for="slider-bottom-shape">Bottom Shape:</label>
                                <div class="tick-slider">
                                    <div id="sliderTicks_6" class="tick-slider-tick-container">
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>

                                    </div>
                                    <input id="slider-bottom-shape" class="tick-slider-input slide-full topmost"
                                        type="range" min="0" max="5" step="1" value="0" data-tick-step="1"
                                        data-tick-id="sliderTicks_6" name="bottom_shape_val" />
                                </div>
                            </div>
                            <div class="feature_group_wrap" id="bottom-width">
                                <label for="slider-bottom-width">Bottom Width:</label>
                                <div class="tick-slider">
                                    <div id="sliderTicks_19" class="tick-slider-tick-container">
                                        <span class="tick-slider-tick"></span>
                                        <span class="tick-slider-tick"></span>


                                    </div>
                                    <input id="slider-bottom-width" class="tick-slider-input slide-full topmost"
                                        type="range" min="0" max="1" step="1" value="0" data-tick-step="1"
                                        data-tick-id="sliderTicks_19" name="bottom_width_val" />
                                </div>
                            </div>
                          
                        </div>
                    </div>
              
                    <div class="body_modeler_action_btn">
                        <button  id="bodyRearBtn" style="cursor: pointer;">Body Rear</button>
                        <button style="cursor: pointer; padding: 10px;"
                             id="submitRegBtn">Submit</button>
                    </div>
                </div>
            </div>
            <div class="modeler_container">
                <div class="body_modeler modeler-heading">
                    <h1>ShapeMeÂ® Body Modeler</h1>
                    <h5>by Mirror Me Fashion</h5>
                    <div class="body_modeler_canvases">
                        <canvas id="renderCanvas" style="height: 100vh; max-width: 100%;"></canvas>
                    </div>


                </div>
            </div>
        </div>


    </section>


    <script>

        const shapeKeys = {}

//         if (BABYLON.Engine.isSupported()) {
//     const canvas = document.getElementById('renderCanvas');
//     const engine = new BABYLON.Engine(canvas, true);
//     // Rest of your code...
// } else {
//     alert("WebGL is not supported on your device or browser.");
// }
  // Initialize Babylon.js 
const canvas = document.getElementById('renderCanvas');
const engine = new BABYLON.Engine(canvas, true);
const scene = new BABYLON.Scene(engine);
scene.clearColor = new BABYLON.Color4(153 / 255, 0, 0, 1); 
if (BABYLON.Engine.isSupported()) {
    console.log("WebGL is supported!");
} else {
    alert("WebGL is not supported on your device or browser.");
}

// Custom orthographic camera class without zoom and rotation
class NoZoomOrthoCamera extends BABYLON.FreeCamera {
    constructor(name, position, scene) {
        super(name, position, scene);
        this.mode = BABYLON.Camera.ORTHOGRAPHIC_CAMERA;

        // Disable zoom and rotation
        this.inputs.clear(); // Clear all inputs (removes mouse and keyboard inputs)
    }
}

// Set up the orthographic camera
const camera = new NoZoomOrthoCamera("noZoomOrthoCamera", new BABYLON.Vector3(0, 0, 1000), scene);

// Configure orthographic size
const aspectRatio = engine.getRenderWidth() / engine.getRenderHeight();
const orthoSize = 35; // Adjust for zoom level (like your original radius setting)
camera.orthoLeft = -orthoSize * aspectRatio;
camera.orthoRight = orthoSize * aspectRatio;
camera.orthoTop = orthoSize;
camera.orthoBottom = -orthoSize;

// Attach the camera to the canvas (no need for controls as inputs are removed)
camera.setTarget(BABYLON.Vector3.Zero());

// Create lighting
const hemisphericLight = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(1, 1, 1), scene);
hemisphericLight.intensity = 0.8;

// Load the .glb file and process the model
function loadGLBFile(url) {
    BABYLON.SceneLoader.Append("", url, scene, function (scene) {
        console.log("Model file loaded successfully");

        scene.meshes.forEach(mesh => {
            const model = scene.getMeshByName(mesh.name);
            if (model) {
                model.position.y = -25;

                const bodyRearBtn = document.getElementById("bodyRearBtn");
                if (bodyRearBtn) {
                    bodyRearBtn.addEventListener('click', () => {
                        if (model.rotation.y === 0) {
                            model.rotation.y = BABYLON.Tools.ToRadians(-90);
                        } else if (model.rotation.y === BABYLON.Tools.ToRadians(-90)) {
                            model.rotation.y = BABYLON.Tools.ToRadians(180);
                        } else {
                            model.rotation.y = BABYLON.Tools.ToRadians(0);
                        }
                    });
                } else {
                    console.error('Element with ID "bodyRearBtn" not found.');
                }

                // Set the pivot point and position
                model.setPivotPoint(new BABYLON.Vector3(0, 0, 0));
            }

            // Log material info for debugging and set alpha to 1.0
            const material = mesh.material;
            if (material) {
                console.log(`Material for ${mesh.name}:`, material);
                if (material.diffuseTexture) {
                    console.log(`Diffuse Texture:`, material.diffuseTexture);
                }else{
                    // console.log(`Diffuse Texture is Not found`);
                }

                // Set alpha to 1.0 (fully opaque)
                material.alpha = 1.0;
            } else {
                // console.log(`${mesh.name} has no material`);
            }

            // Check for morph targets
            if (mesh.morphTargetManager) {
                const manager = mesh.morphTargetManager;
                console.log(`Number of Morph Targets: ${manager.numTargets}`);
                for (let i = 0; i < manager.numTargets; i++) {
                    const target = manager.getTarget(i);
                    storeShapeKeys(target.name, target.influence);
                 console.log(`Morph Target: ${target.name}, Influence: ${target.influence}`);
                }
            }
        });
    }, null, function (scene, message, exception) {
        console.error("Error loading model file:", message, exception);
    });
}

// Update morph target influence dynamically
function updateMorphTarget(meshName, targetName, newInfluence) {
    const mesh = scene.getMeshByName(meshName);
    if (mesh && mesh.morphTargetManager) {
        const target = mesh.morphTargetManager.getTargetByName(targetName);
        if (target) {
            target.influence = newInfluence;
            storeShapeKeys(target.name, target.influence);
         
            console.log(`Updated Morph Target: ${target.name}, New Influence: ${target.influence}`);
        }
    }
}

// Show the Babylon.js inspector for debugging
// scene.debugLayer.show();

// Render loop
engine.runRenderLoop(() => scene.render());

// Handle window resize
window.addEventListener('resize', () => engine.resize());

        function storeShapeKeys(key, value) {
            // Store the user response in the userResponses object
            shapeKeys[key] = value;
        }

        storeShapeKeys('stomachShape','average');
        storeShapeKeys('headShape','average');
        storeShapeKeys('bottomShape','average');
        storeShapeKeys('neckShape','average');
        storeShapeKeys('chinShape','average');
    
        // Get references to all the sliders
        const sliders = {
            headShape: document.getElementById('slider-head-shape'),
            headSize: document.getElementById('slider-head-size'),
            neckHeight: document.getElementById('slider-neck-height'),
            neckWidth: document.getElementById('slider-neck-width'),
            neckShape: document.getElementById('slider-neck-shape'),
            chinShape: document.getElementById('slider-chin-shape'),
            shoulderHeight: document.getElementById('slider-shoulder-height'),
            shoulderWidth: document.getElementById('slider-shoulder-width'),
            armSize: document.getElementById('slider-arm-size'),
            armLength: document.getElementById('slider-arm-length'),
            breastSize: document.getElementById('slider-breast-size'),
            torsoHeight: document.getElementById('slider-torso-height'),
            crotchHeight: document.getElementById('slider-crotch-height'),
            legSize: document.getElementById('slider-leg-size'),
            hipSize: document.getElementById('slider-hip-size'),
            stomachShape: document.getElementById('slider-stomach-shape'),
            stomachWidth: document.getElementById('slider-stomach-width'),
            trimester: document.getElementById('slider-pregnant-size'),
            bottomShape: document.getElementById('slider-bottom-shape'),
            bottomWidth: document.getElementById('slider-bottom-width'),
            neckLayers: document.getElementById('slider-neck-rolls')
        };


        // Event listener for head shape slider
        sliders.headShape.addEventListener('change', function () {
            // Update head shape morph targets based on slider value
        
            // console.log(sliders.headShape.value)
            const shapes = ['oblong', 'round'];
            shapes.forEach((shape, index) => {
                const value = (sliders.headShape.value == index + 1) ? 1 : 0;
                updateMorphTarget('Shape_average_petite:High-poly_primitive0', `shape_head_${shape}`, Number(value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', `shape_head_${shape}`, Number(value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', `shape_head_${shape}`, Number(value));
               
                storeShapeKeys('headShape',shape);
            });

         

        });

        // Shape key mappings
        const stomachShapeKeys = {
            '0': 'stomach_width_average',     // Average, Curvy, Pouch, Muffintop
            '1': 'stomach_width_average',
            '2': 'stomach_width_spoon',
            '3': 'stomach_width_spoon',
            '4': 'stomach_width_rect', // Rectangle
            '5': 'stomach_width_pregnant'      // Spoon
        };

        const allStomachShapeKeys = ['stomach_width_average', 'stomach_width_spoon', 'stomach_width_rect','stomach_width_pregnant' ];
// Initially disable the trimester slider
sliders.trimester.disabled = true;
        // Event listener for stomach shape slider
        sliders.stomachShape.addEventListener('change', function () {

          
            // Update stomach shape morph targets based on slider value
            const shapes = ['curvy', 'MT', 'spoon', 'rectangle', 'pregnant' ];
            shapes.forEach((shape, index) => {
                const value = (sliders.stomachShape.value == index + 1) ? 1 : 0;
          
                updateMorphTarget('Shape_average_petite:High-poly_primitive0', `shape_stomach_${shape}`, Number(value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', `shape_stomach_${shape}`, Number(value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', `shape_stomach_${shape}`, Number(value));
            if(value){
                storeShapeKeys('stomachShape',shape);
            }
               
            });

            // Get the active shape key based on stomach shape selection
   const activeShapeKey = stomachShapeKeys[sliders.stomachShape.value] || 'stomach_width_pouch';
 // Enable/disable trimester slider based on stomach shape value
 if (sliders.stomachShape.value == 5) { // Pregnant shape
        sliders.trimester.disabled = false; // Enable trimester slider
    } else {
        sliders.trimester.disabled = true;  // Disable trimester slider
    }
            // Update all stomach width shape keys
            allStomachShapeKeys.forEach(key => {
                const value = (key === activeShapeKey) ? 1 : 0;
                if (value) {
                    updateMorphTarget('Shape_average_petite:High-poly_primitive0', key, Number(sliders.stomachWidth.value));
                    updateMorphTarget('Shape_average_petite:High-poly_primitive1', key, Number(sliders.stomachWidth.value));
                    updateMorphTarget('Shape_average_petite:High-poly_primitive2', key, Number(sliders.stomachWidth.value));
                }

            });
      
        





       
        });




        // Shoulder width and stomach size



        sliders.shoulderWidth.addEventListener('change', function () {
            updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'shoulder_width', Number(sliders.shoulderWidth.value));
            updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'shoulder_width', Number(sliders.shoulderWidth.value));
            updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'shoulder_width', Number(sliders.shoulderWidth.value));
            let shapeKey;
           
            switch (sliders.stomachShape.value) {
               
                case '2': 
                case '3':   
                       shapeKey = 'stomach_width_spoon';
                    break;
                case '4': // Spoon
                      shapeKey = 'stomach_width_rect';
                    break;
               case '5': // Spoon
                    shapeKey = 'stomach_width_pregnant';
                    break;
                default:
                    shapeKey = 'stomach_width_average'; 
                // Average, 
               // Curvy, 
               // Pouch, 
                // Muffintop, 
            }

            // Update the corresponding morph target for the stomach shape
          
               

            if (shapeKey == 'stomach_width_rect') {

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_pregnant', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_pregnant', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_pregnant', 0);

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_rect', Number(sliders.shoulderWidth.value) );
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_rect', Number(sliders.shoulderWidth.value) );
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_rect', Number(sliders.shoulderWidth.value) );

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_spoon', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_spoon', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_spoon', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_average', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_average', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_average', 0);
            } else if (shapeKey == 'stomach_width_spoon') {

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_pregnant', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_pregnant', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_pregnant', 0);

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_rect', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_rect', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_rect', 0);

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_spoon', Number(sliders.shoulderWidth.value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_spoon', Number(sliders.shoulderWidth.value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_spoon', Number(sliders.shoulderWidth.value));
                
                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_average', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_average', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_average', 0);
            }else if(shapeKey == 'stomach_width_pregnant'){
                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_pregnant', Number(sliders.shoulderWidth.value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_pregnant', Number(sliders.shoulderWidth.value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_pregnant', Number(sliders.shoulderWidth.value));

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_rect', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_rect', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_rect', 0);

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_spoon', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_spoon', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_spoon', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_average', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_average', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_average', 0);


            }else{
                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_pregnant',0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_pregnant', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_pregnant', 0);

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_rect', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_rect', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_rect', 0);

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_spoon', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_spoon', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_spoon', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_average',  Number(sliders.shoulderWidth.value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_average',  Number(sliders.shoulderWidth.value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_average',  Number(sliders.shoulderWidth.value));

            }
        });


          sliders.stomachWidth.addEventListener('change', function () {
            updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'shoulder_width', Number(sliders.stomachWidth.value));
            updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'shoulder_width', Number(sliders.stomachWidth.value));
            updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'shoulder_width', Number(sliders.stomachWidth.value));
            let shapeKey;
           
            switch (sliders.stomachShape.value) {
              
                case '2': 
                case '3': 
                //Spoon 
                shapeKey = 'stomach_width_spoon';
                    break;
                case '4': // Rectangle
                shapeKey = 'stomach_width_rect';
                   
                    break;
                    case '5': // Rectangle
                shapeKey = 'stomach_width_pregnant';
                   
                    break;
                default:
                    shapeKey = 'stomach_width_average'; 
                // Average, 
               // Curvy, 
               // Pouch, 
                // Muffintop, 
            }

            // Update the corresponding morph target for the stomach shape
          
               

            if (shapeKey == 'stomach_width_rect') {

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_pregnant', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_pregnant', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_pregnant', 0);

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_rect', Number(sliders.stomachWidth.value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_rect', Number(sliders.stomachWidth.value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_rect', Number(sliders.stomachWidth.value));

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_spoon', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_spoon', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_spoon', 0);

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_average', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_average', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_average', 0);
            } else if (shapeKey == 'stomach_width_spoon') {

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_pregnant', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_pregnant', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_pregnant', 0);

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_rect', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_rect', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_rect', 0);

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_spoon', Number(sliders.stomachWidth.value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_spoon', Number(sliders.stomachWidth.value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_spoon', Number(sliders.stomachWidth.value));

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_average', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_average', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_average', 0);
            }else if(shapeKey == 'stomach_width_pregnant'){
                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_pregnant', Number(sliders.stomachWidth.value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_pregnant', Number(sliders.stomachWidth.value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_pregnant', Number(sliders.stomachWidth.value));

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_rect', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_rect', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_rect', 0);

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_spoon', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_spoon', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_spoon', 0);

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_average',0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_average',0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_average',0);

            }
            
            else{
                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_pregnant',0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_pregnant',0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_pregnant',0);

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_rect', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_rect', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_rect', 0);

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_spoon', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_spoon', 0);
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_spoon', 0);

                updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'stomach_width_average',Number(sliders.stomachWidth.value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'stomach_width_average',Number(sliders.stomachWidth.value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'stomach_width_average',Number(sliders.stomachWidth.value));

            }
        });

    

        // Event listener for bottom shape slider
        sliders.bottomShape.addEventListener('change', function () {
            // Update bottom shape morph targets based on slider value
            const shapes = ['round', 'square', 'inverted', 'flat', 'heart'];

            shapes.forEach((shape, index) => {
                const value = (sliders.bottomShape.value == index + 1) ? 1 : 0;  
                storeShapeKeys('bottomShape',shape);
                updateMorphTarget('Shape_average_petite:High-poly_primitive0', `bottom_shape_${shape}`, Number(value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', `bottom_shape_${shape}`, Number(value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', `bottom_shape_${shape}`, Number(value));
            });
        });
        sliders.neckShape.addEventListener('change', function () {
            
          if(sliders.neckShape.value==0){
            updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'neck_shape', Number(0));
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'neck_shape', Number(0));
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'neck_shape', Number(0));
          
          }else{
            updateMorphTarget('Shape_average_petite:High-poly_primitive0', 'neck_shape', Number(sliders.stomachWidth.value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', 'neck_shape', Number(sliders.stomachWidth.value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', 'neck_shape', Number(sliders.stomachWidth.value));
          }
                
            });
       
        // Helper function to add change event listener for sliders
        function addChangeListener(slider, morphName) {
            slider.addEventListener('change', function () {
                updateMorphTarget('Shape_average_petite:High-poly_primitive0', morphName, Number(slider.value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive1', morphName, Number(slider.value));
                updateMorphTarget('Shape_average_petite:High-poly_primitive2', morphName, Number(slider.value));
            });
        }

        // Adding change event listeners for other sliders
        addChangeListener(sliders.headSize, 'head_size');
        addChangeListener(sliders.neckHeight, 'neck_height');
        addChangeListener(sliders.neckWidth, 'neck_width');
        addChangeListener(sliders.shoulderHeight, 'shoulder_height');
        addChangeListener(sliders.armSize, 'arm_size');
        addChangeListener(sliders.armLength, 'arms_distended');
        addChangeListener(sliders.breastSize, 'breasts');
        addChangeListener(sliders.torsoHeight, 'torso_distended');
        addChangeListener(sliders.crotchHeight, 'crotch_height');
        addChangeListener(sliders.legSize, 'leg_size');
        addChangeListener(sliders.hipSize, 'hips_size');
        addChangeListener(sliders.bottomWidth, 'bottom_width');
        addChangeListener(sliders.trimester, 'trimester');
        addChangeListener(sliders.chinShape, 'chin_shape');
        addChangeListener(sliders.neckLayers, 'neck_layers');
       

        const BMI = 40;
let sex = 'female';


if (BMI >= 16 && BMI < 65) {
    if (sex == "female" || sex == "non-binary" || sex == "non binary") {
        if (BMI < 22) {
           
            // Load and render the scene
            loadGLBFile(`${sex}_skinny.glb`);
        } else if (BMI < 26) {
           // Load and render the scene
             loadGLBFile(`${sex}_average.glb`);
        } else if (BMI < 36) {
              // Load and render the scene
              loadGLBFile(`${sex}_OW.glb`);
        } else if (BMI < 42) {
          
              // Load and render the scene
            loadGLBFile(`${sex}_obese.glb`);
        } else {
              // Load and render the scene
              loadGLBFile(`${sex}_morbid.glb`);
        }
    } else if (sex == "male") {
        if (BMI < 22) {
            loadGLBFile(`${sex}_skinny.glb`);
        } else if (BMI < 36) {
           // Load and render the scene
           loadGLBFile(`${sex}_average.glb`);
        } else {
              // Load and render the scene
              loadGLBFile(`${sex}_OW.glb`);
        }
    }
}else{
    alert(`You have entered a weight that is dangerously unhealthy. Please enter a weight between 90 - 400lbs or 40 - 226kg to continue.`);
}





    </script>
<!-- <script src="utility.js"></script>
<script src="generateAlphanumericCode.js"></script> -->

<script>

document.getElementById('submitRegBtn').addEventListener('click',function(){
 
  console.log(generateAlphanumericCode(shapeKeys,'average'));
})


</script>
</body>

</html>